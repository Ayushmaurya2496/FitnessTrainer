<header class="site-header">
  <div class="container">
    <a href="/" class="logo">
      <img src="/images/logo.svg" alt="AI Fitness Trainer Logo">
      <span>AI Fitness Trainer</span>
    </a>
    <nav class="nav-actions">
      <% if (user) { %>
        <a class="btn btn-outline" href="/dashboard">Dashboard</a>
        <span class="welcome">Hi, <%= user.fullName || user.username %></span>
        <button id="logoutBtn" class="btn btn-outline">Logout</button>
      <% } else { %>
        <a id="loginBtn" class="btn" href="/auth/login">Login</a>
        <a id="registerBtn" class="btn btn-outline" href="/auth/register">Register</a>
      <% } %>
    </nav>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="modal" aria-hidden="true" style="display:none;">
    <div class="modal-dialog">
      <div class="modal-header">
        <h3>Login</h3>
        <button type="button" class="close" id="closeLoginModal">×</button>
      </div>
      <form id="loginForm" class="modal-body">
        <label>Email or Username</label>
        <input type="text" name="identifier" placeholder="you@example.com or username" required>
        <label>Password</label>
        <input type="password" name="password" placeholder="••••••••" required>
        <button type="submit" class="btn full">Login</button>
        <p id="loginError" class="error" role="alert" style="display:none"></p>
        <p style="margin-top:8px;color:var(--muted)">No account? <a href="#" id="toRegister">Register</a></p>
      </form>
    </div>
  </div>

  <!-- Register Modal -->
  <div id="registerModal" class="modal" aria-hidden="true" style="display:none;">
    <div class="modal-dialog">
      <div class="modal-header">
        <h3>Create account</h3>
        <button type="button" class="close" id="closeRegisterModal">×</button>
      </div>
      <form id="registerForm" class="modal-body">
        <label>Name</label>
        <input type="text" name="username" placeholder="johndoe" required>
        
        <label>Email</label>
        <input type="email" name="email" placeholder="you@example.com" required>
        
        <label>Full name</label>
        <input type="text" name="fullName" placeholder="John Doe" required>
        
        <label>Password</label>
        <input type="password" name="password" placeholder="••••••••" required>
        
        <button type="submit" class="btn full">Register</button>
        <p id="registerError" class="error" role="alert" style="display:none"></p>
        <p style="margin-top:8px;color:var(--muted)">Already have an account? <a href="#" id="toLogin">Login</a></p>
      </form>
    </div>
  </div>
</header>

<script defer src="/js/header-auth.js"></script>
